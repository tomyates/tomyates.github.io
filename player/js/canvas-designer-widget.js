export function CanvasDesigner(){var e=this;e.iframe=null;var n={line:!0,arrow:!0,pencil:!0,dragSingle:!0,dragMultiple:!0,eraser:!0,rectangle:!0,arc:!0,bezier:!0,quadratic:!0,text:!0,image:!0,pdf:!0,marker:!0,zoom:!0,lineWidth:!0,colorsPicker:!0,extraOptions:!0,code:!0};e.icons={line:null,arrow:null,pencil:null,dragSingle:null,dragMultiple:null,eraser:null,rectangle:null,arc:null,bezier:null,quadratic:null,text:null,image:null,pdf:null,pdf_next:null,pdf_prev:null,pdf_close:null,marker:null,zoom:null,lineWidth:null,colorsPicker:null,extraOptions:null,code:null};var t="pencil",a=function(e){},i=function(e){},r=function(){};function o(n){if(n.data&&n.data.uid===e.uid){if(!n.data.sdp)return n.data.canvasDesignerSyncData?(e.pointsLength=n.data.canvasDesignerSyncData.points.length,void a(n.data.canvasDesignerSyncData)):void(n.data.dataURL&&i(n.data.dataURL));webrtcHandler.createAnswer(n.data,(function(n){n.sdp?e.postMessage(n):r(n.stream)}))}}e.uid=function(){if(window.crypto&&window.crypto.getRandomValues&&-1===navigator.userAgent.indexOf("Safari")){for(var e=window.crypto.getRandomValues(new Uint32Array(3)),n="",t=0,a=e.length;t<a;t++)n+=e[t].toString(36);return n}return(Math.random()*(new Date).getTime()).toString(36).replace(/\./g,"")}(),e.appendTo=function(a,i){i=i||function(){},e.iframe=document.createElement("iframe"),e.iframe.onload=function(){i(),i=null},e.iframe.src=e.widgetHtmlURL+"?widgetJsURL="+e.widgetJsURL+"&tools="+JSON.stringify(n)+"&selectedIcon="+t+"&icons="+JSON.stringify(e.icons),e.iframe.style.width="100%",e.iframe.style.height="100%",e.iframe.style.border=0,window.removeEventListener("message",o),window.addEventListener("message",o,!1),a.appendChild(e.iframe)},e.destroy=function(){e.iframe&&(e.iframe.parentNode.removeChild(e.iframe),e.iframe=null),window.removeEventListener("message",o)},e.addSyncListener=function(e){a=e},e.syncData=function(n){e.iframe&&e.postMessage({canvasDesignerSyncData:n})},e.setTools=function(e){n=e},e.setSelected=function(e){void 0!==n[e]&&(t=e)},e.toDataURL=function(n,t){i=t,e.iframe&&e.postMessage({genDataURL:!0,format:n})},e.sync=function(){e.iframe&&e.postMessage({syncPoints:!0})},e.pointsLength=0,e.undo=function(t){e.iframe&&("string"==typeof t&&n[t]?e.postMessage({undo:!0,tool:t}):e.postMessage({undo:!0,index:t||e.pointsLength-1||-1}))},e.postMessage=function(n){e.iframe&&(n.uid=e.uid,e.iframe.contentWindow.postMessage(n,"*"))},e.captureStream=function(n){e.iframe&&(r=n,e.postMessage({captureStream:!0}))},e.clearCanvas=function(){e.iframe&&e.postMessage({clearCanvas:!0})},e.renderStream=function(){e.iframe&&e.postMessage({renderStream:!0})},e.widgetHtmlURL="widget.html",e.widgetJsURL="widget.min.js"}